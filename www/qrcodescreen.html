<html>
<head>
<meta charset="utf-8">
        <!--meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;-->
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <meta name="color-scheme" content="light dark">
        <link rel="stylesheet" href="css/index.css">
        <script src="./node_modules/qrcode/build/qrcode.min.js"></script>
        

</head>
  <body>

        <div id="textdata">
                <input type="text" id="vin" name="vin" placeholder="Enter VIN Number"><br>
                <button id="gohome">Go Home</button><br><br>
                <textarea id="deviceinfo" name="deviceinfo" rows="10" cols="100"></textarea>
                
        </div>
        <div>
        <canvas id="canvas">
                        <script>
                                 
                                //localStorage.setItem('vincode', "4Y1SL65848Z411439")
                                /*QRCode.toCanvas(document.getElementById('canvas'), localStorage.getItem('vincode'), function (error) {
                                    if (error) {
                                        console.error(error)
                                    }
                                })*/
                        </script>
        </canvas><br>
        <script>
                    let dinfo = localStorage.getItem('deviceinfo') 
                         var parsedData = JSON.parse(dinfo);
                         document.getElementById("deviceinfo").value = `Cordova Version: ${parsedData.cordovaversion} ${String.fromCharCode(13, 10)} UUID: ${parsedData.uuid}`
        </script>
        </div>

        <script>
             //localStorage.setItem('vincode', "4Y1SL65848Z411439")
                QRCode.toCanvas(document.getElementById('canvas'), localStorage.getItem('vincode'), function (error) {
                    if (error) {
                        console.error(error)
                    }
                })

            document.getElementById('gohome').addEventListener("click", function() {
                window.location.href = "index.html"
            });

            document.getElementById('vin').value = localStorage.getItem('vincode');
            document.getElementById('vin').disabled = true;
             /*QRScanner.scan().subscribe(function(err, contents) {
                    localStorage.setItem('vincode',contents)
                })*/

                
               
        </script>
        
  </body>
</html>